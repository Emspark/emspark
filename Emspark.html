<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EM'SPARK</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik+Mono+One&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  <script src="./particles.min.js"></script>
  <style>
    body.dark {
  background: linear-gradient(to bottom, #1f2937, #4b5563, #111827);
  color: white;
}
.dark .text-black { color: white !important; }
.dark .bg-white { background-color: #1f2937 !important; }
.dark select, .dark input, .dark button {
  color: black;
}
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom, #ffedd5, #fdba74, #fb923c);
      min-height: 100vh;
      overflow-x: hidden;
    }
    #particles-js {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    .hidden { display: none; }
    .fade { transition: opacity 0.5s ease-in-out; opacity: 0; }
    .fade.show { opacity: 1; }
    .logo-title {
      font-family: 'Rubik Mono One', sans-serif;
    }
  </style>
</head>

<body onload="initializeApp()" class="text-white p-6 flex flex-col min-h-screen justify-between">
  <div id="particles-js"></div>

  <header class="text-center mb-12">
    <img src="./logo.png" alt="Em'Spark Logo" class="mx-auto mb-4 w-28 h-28 drop-shadow-xl">
    <div class="flex justify-end">
      <button onclick="toggleDarkMode()" class="bg-black text-white px-4 py-2 rounded shadow hover:bg-gray-800 transition">
        🌓 Mode sombre
      </button>
    </div>

    
      <h1 class="text-5xl logo-title tracking-wide text-black">EM’SPARK</h1>
      <p class="text-xl mt-2 text-orange-700 italic">Crée des connexions authentiques autour de tes passions ✨</p>

  <main class="max-w-6xl mx-auto flex-grow">
    <nav class="flex flex-wrap justify-center gap-4 my-10">
      <a href="#calendar" onclick="showTab('calendar')" class="bg-white text-black rounded-full px-5 py-2 font-semibold shadow hover:bg-orange-300 transition">📅 Calendrier</a>
      <a href="#passions" onclick="showTab('passions')" class="bg-white text-black rounded-full px-5 py-2 font-semibold shadow hover:bg-orange-300 transition">🎯 Passions</a>
      <a href="#chat" onclick="showTab('chat')" class="bg-white text-black rounded-full px-5 py-2 font-semibold shadow hover:bg-orange-300 transition">💬 Discussions</a>
      <a href="#profile" onclick="showTab('profile')" class="bg-white text-black rounded-full px-5 py-2 font-semibold shadow hover:bg-orange-300 transition">👤 Profil</a>
    </nav>

    <section id="calendar" class="fade hidden text-black">
      <h2 class="text-4xl font-bold mb-6 text-center">📅 Calendrier des Événements</h2>
      <div class="flex justify-center mb-4">
        <button onclick="toggleSortOrder()" class="bg-orange-600 text-white px-4 py-2 rounded">
          Trier : <span id="sort-label">Prochains d'abord</span>
        </button>
      </div>
      <div id="calendar-events" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </section>

    <section id="passions" class="fade hidden text-black">
      <h2 class="text-4xl font-bold mb-6 text-center">🎯 Activités par Passion</h2>
      <div class="text-center mb-4">
        <select id="passionSelect" onchange="filterByPassion()" class="text-black px-4 py-2 rounded">
          <option value="">-- Choisir une passion --</option>
          <option value="Voyage">✈️ Voyage</option>
          <option value="Investissement-Finance">💰 Investissement-Finance</option>
          <option value="Arts">🎨 Arts-Musique</option>
          <option value="Cuisine">👨‍🍳 Cuisine-Gastronomie</option>
          <option value="Mode">👗 Mode-Style</option>
          <option value="Yoga">🧘‍♂️ Yoga-Méditation</option>
          <option value="Jeux">🎮 JeuxVidéo</option>
          <option value="Jeux d'argent">🎲 Jeux d'argent</option>
          <option value="Développement">🤯 Développement personnel</option>
          <option value="Ecriture">✏️ Ecriture</option>
          <option value="Soirée">🎉 Soirée</option>
          <option value="Lecture">📚 Lecture</option>
          <option value="Sport">⚽ Sport</option>
          <option value="Startup">📈 Business-Startups</option>
          <option value="Danse">💃 Danse</option>
          <option value="Cinéma">🍿 Cinéma</option>
          <option value="Photographie">📸 Photographie</option>
        </select>
      </div>
      <div id="filtered-events" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </section>

    <section id="chat" class="fade hidden text-black">
      <h2 class="text-4xl font-bold mb-6 text-center">💬 Discussions par Passion</h2>
      <div class="text-center mb-6">
        <select id="chatSelect" onchange="loadChat()" class="text-black px-4 py-2 rounded shadow">
          <option value="">-- Choisir une passion --</option>
          <option value="Voyage">✈️ Voyage</option>
          <option value="Investissement-Finance">💰 Investissement-Finance</option>
          <option value="Arts">🎨 Arts-Musique</option>
          <option value="Cuisine">👨‍🍳 Cuisine-Gastronomie</option>
          <option value="Mode">👗 Mode-Style</option>
          <option value="Yoga">🧘‍♂️ Yoga-Méditation</option>
          <option value="Jeux">🎮 JeuxVidéo</option>
          <option value="Jeux d'argent">🎲 Jeux d'argent</option>
          <option value="Développement">🤯 Développement personnel</option>
          <option value="Ecriture">✏️ Ecriture</option>
          <option value="Soirée">🎉 Soirée</option>
          <option value="Lecture">📚 Lecture</option>
          <option value="Sport">⚽ Sport</option>
          <option value="Startup">📈 Business-Startups</option>
          <option value="Danse">💃 Danse</option>
          <option value="Cinéma">🍿 Cinéma</option>
          <option value="Photographie">📸 Photographie</option>
        </select>
      </div>

      <div id="chatBox" class="bg-white text-black p-4 rounded shadow max-w-2xl mx-auto space-y-2 min-h-[150px]">
        <p class="text-center text-gray-500">Sélectionne une passion pour afficher le chat correspondant.</p>
      </div>

      <div id="chatFormContainer" class="max-w-2xl mx-auto mt-4 hidden">
        <form onsubmit="sendMessage(event)" class="flex gap-2">
          <input type="text" id="chatInput" placeholder="Écris ton message..." class="flex-grow px-4 py-2 rounded border border-gray-300 text-black" required>
          <button type="submit" class="bg-orange-600 text-white px-4 py-2 rounded">Envoyer</button>
        </form>
      </div>
    </section>

    <section id="profile" class="fade hidden text-black">
      <h2 class="text-4xl font-bold mb-6 text-center">👤 Mon Profil</h2>
      <div class="bg-white text-black p-6 rounded shadow max-w-md mx-auto">
        <p class="text-lg">Bienvenue sur EM'SPARK !</p>
        <p class="text-sm text-gray-600">Voici ta passion favorite :</p>
        <p id="favoritePassion" class="text-xl font-semibold text-orange-600 mt-2">Chargement...</p>
      </div>
    </section>
  </main>

  <script>
    const allEvents = [
  { passion: "Voyage", label: "Roadtrip Normand", date: "2025-05-10", price: "Gratuit" },
  { passion: "Startup", label: "Pitch Battle", date: "2025-05-12", price: "5€" },
  { passion: "Cuisine", label: "Atelier Crêpes", date: "2025-05-14", price: "Entrée libre" },
  { passion: "Photographie", label: "Expo participative", date: "2025-05-15", price: "Gratuit" },
  { passion: "Cinéma", label: "Soirée courts-métrages", date: "2025-05-16", price: "3€" },
  { passion: "Sport", label: "Tournoi inter-assos", date: "2025-05-17", price: "Gratuit" },
  { passion: "Danse", label: "Battle de danse", date: "2025-05-18", price: "Entrée libre" },
  { passion: "Lecture", label: "Café lecture poétique", date: "2025-05-19", price: "Gratuit" },
  { passion: "JeuxVidéo", label: "LAN Minecraft", date: "2025-05-20", price: "2€" },
  { passion: "Investissement-Finance", label: "Conférence Pierre Chartier X2007", date: "2025-05-21", price: "Gratuit" },
  { passion: "Arts", label: "Jam session musicale", date: "2025-05-22", price: "Entrée libre" },
  { passion: "Mode", label: "Défilé étudiants créateurs", date: "2025-05-23", price: "5€" },
  { passion: "Yoga", label: "Yoga Sunset Rooftop", date: "2025-05-24", price: "Gratuit" },
  { passion: "Développement", label: "Atelier Confiance en soi", date: "2025-05-25", price: "Gratuit" },
  { passion: "Ecriture", label: "Soirée micro-ouvert", date: "2025-05-26", price: "Entrée libre" },
  { passion: "Soirée", label: "Soirée blind test", date: "2025-05-27", price: "5€" },
  { passion: "Jeux d'argent", label: "Tournoi de poker étudiant", date: "2025-05-28", price: "10€" },
  { passion: "Jeux d'argent", label: "Initiation au blackjack", date: "2025-05-29", price: "Gratuit" }
 
  ];

    const chatMessages = {
      "Voyage": ["Léa : Qui part en Espagne cet été ?", "Alex : J’ai une tente en rab !"],
      "Investissement-Finance": ["Sami : Qui va à la conf' avec Pierre Chartier ?", "Léon : Bien Sûrrrr guysss !"],
      "Arts": ["Chloé : Vernissage ce vendredi", "Yacine : Session dessin dimanche ?"],
      "Cuisine": ["Camille : Recette facile ?", "Tom : J’apporte le dessert 🍰"],
      "Mode": ["Lina : Défilé vintage samedi !", "Sophie : Friperie à Paris 😍"],
      "Yoga": ["Mehdi : Méditation demain 🌞", "Emma : Respiration ?"],
      "Jeux": ["Nico : LoL ce soir ?", "Katia : Mario Kart 😆"],
      "Jeux d'argent": ["Sami : Poker ce soir ?", "Léon : On mise quoi ? 😎"],
      "Développement": ["Sarah : Des livres à recommander ?", "Youssef : Journal de gratitude 💡"],
      "Ecriture": ["Maya : Concours poésie", "Nina : Battle de textes ✍️"],
      "Soirée": ["Lucas : Blind test vendredi", "Imane : Snacks 🎉"],
      "Lecture": ["Nora : Vous lisez quoi ?", "Moussa : Slam 💫"],
      "Sport": ["Anas : Foot dimanche ⚽", "Emma : Binôme running 🏃‍♀️"],
      "Startup": ["Clément : Pitch demain 😅", "Sarah : Dev freelance ?"],
      "Danse": ["Lola : Atelier afro !", "Jules : Battle samedi 💃"],
      "Cinéma": ["Yohan : Avant-première ce soir", "Zoé : Nolan ?"],
      "Photographie": ["Jade : Expo demain 📸", "Ben : Modèles pour projet"]
    };

    let sortByUpcoming = true;
    let currentChat = "";

    function initializeApp() {
      showTab('calendar');
      renderCalendarEvents();
    }

    function showTab(tabId) {
      ['calendar', 'passions', 'chat', 'profile'].forEach(id => {
        const tab = document.getElementById(id);
        tab.classList.add('hidden');
        tab.classList.remove('show');
      });
      const activeTab = document.getElementById(tabId);
      activeTab.classList.remove('hidden');
      setTimeout(() => activeTab.classList.add('show'), 10);
      if (tabId === 'profile') loadFavoritePassion();
    }

    function toggleSortOrder() {
      sortByUpcoming = !sortByUpcoming;
      document.getElementById("sort-label").innerText = sortByUpcoming ? "Prochains d'abord" : "Chronologie inversée";
      renderCalendarEvents();
    }

    function renderCalendarEvents() {
      const container = document.getElementById("calendar-events");
      const favs = getFavorites();
      const sorted = [...allEvents].sort((a, b) => new Date(a.date) - new Date(b.date));
      container.innerHTML = sorted.map(e => `
        <div class="bg-white text-black rounded-2xl shadow p-5 relative transition transform hover:scale-105 hover:shadow-lg">
          <h3 class="text-xl font-semibold mb-1">${e.passion} — ${e.label}</h3>
          <p class="text-sm text-gray-600">${e.date} — ${e.price}</p>
          <button onclick="toggleFavorite('${eIndex(e)}')" class="absolute top-3 right-3 text-xl">
            ${favs.includes(eIndex(e)) ? '💖' : '🤍'}
          </button>
        </div>`).join('');
    }

    function eIndex(e) {
      return `${e.passion}-${e.label}`;
    }
    function emojiForPassion(passion) {
  const emojis = {
    "Voyage": "✈️", "Startup": "📈", "Cuisine": "👨‍🍳", "Photographie": "📸",
    "Cinéma": "🍿", "Sport": "⚽", "Danse": "💃", "Lecture": "📚",
    "JeuxVidéo": "🎮", "Investissement": "💰", "Arts": "🎨", "Mode": "👗",
    "Yoga": "🧘‍♂️", "Développement": "🤯", "Ecriture": "✏️", "Soirée": "🎉",
    "Jeux d'argent": "🎲"
  };
  return emojis[passion] || "✨";
}
    function getFavorites() {
      return JSON.parse(localStorage.getItem("favoriteEvents")) || [];
    }

    function toggleFavorite(id) {
      let favs = getFavorites();
      favs.includes(id) ? favs = favs.filter(f => f !== id) : favs.push(id);
      localStorage.setItem("favoriteEvents", JSON.stringify(favs));
      renderCalendarEvents();
    }

    function filterByPassion() {
      const value = document.getElementById("passionSelect").value;
      const zone = document.getElementById("filtered-events");
      const result = allEvents.filter(e => e.passion === value);
      localStorage.setItem("favoritePassion", value);
      zone.innerHTML = result.length
        ? result.map(e => `
          <div class="bg-white text-black rounded-2xl shadow p-5">
            <h3 class="text-xl font-semibold mb-1">${emojiForPassion(e.passion)} ${e.passion} — ${e.label}</h3>
            <p class="text-sm text-gray-600">${e.date} — ${e.price}</p>
          </div>`).join('')
        : '<p class="text-center w-full">Aucun événement trouvé pour cette passion.</p>';
    }

    function loadFavoritePassion() {
      const fav = localStorage.getItem("favoritePassion") || "Non définie";
      document.getElementById("favoritePassion").textContent = fav !== "" ? fav : "Non définie";
    }

    function loadChat() {
      const value = document.getElementById("chatSelect").value;
      const box = document.getElementById("chatBox");
      const form = document.getElementById("chatFormContainer");
      currentChat = value;

      if (!value || !chatMessages[value]) {
        box.innerHTML = `<p class="text-center text-gray-500">Sélectionne une passion pour afficher le chat correspondant.</p>`;
        form.classList.add("hidden");
        return;
      }

      const messages = chatMessages[value];
      box.innerHTML = messages.length > 0
        ? messages.map(msg => {
            const [name, text] = msg.split(" : ");
            return `<p><strong class="text-orange-600">${name}</strong> : ${text}</p>`;
          }).join('')
        : `<p class="text-center text-gray-500">Aucun message pour cette passion. Lance la discussion !</p>`;

      form.classList.remove("hidden");
    }

    function sendMessage(e) {
      e.preventDefault();
      const input = document.getElementById("chatInput");
      const message = input.value.trim();
      if (message === "" || currentChat === "") return;
      chatMessages[currentChat].push(`Toi : ${message}`);
      input.value = "";
      loadChat();
    }

    // Particles
    particlesJS("particles-js", {
  particles: {
    number: { value: 70 },
    color: { value: "#1f2937" },
    shape: { type: "circle" },
    opacity: { value: 0.5 },
    size: { value: 4, random: true },
    line_linked: {
      enable: true,
      distance: 120,
      color: "#1f2937",
      opacity: 0.4,
      width: 1
    },
    move: { enable: true, speed: 1.5 }
  },
  interactivity: {
  detect_on: "window",
  events: {
    onhover: { enable: true, mode: "repulse" },
    onclick: { enable: true, mode: "push" },
    resize: true
  },
  modes: {
    repulse: { distance: 100 },
    push: { particles_nb: 4 }
  }
}, // ← il manquait cette virgule ici pour séparer les objets
  retina_detect: true
});

</script>
<script>
  function toggleDarkMode() {
    document.body.classList.toggle('dark');
  }
</script>
</body>
</html>